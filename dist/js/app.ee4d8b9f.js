(function(e){function t(t){for(var o,s,a=t[0],c=t[1],u=t[2],d=0,h=[];d<a.length;d++)s=a[d],Object.prototype.hasOwnProperty.call(i,s)&&i[s]&&h.push(i[s][0]),i[s]=0;for(o in c)Object.prototype.hasOwnProperty.call(c,o)&&(e[o]=c[o]);l&&l(t);while(h.length)h.shift()();return r.push.apply(r,u||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],o=!0,a=1;a<n.length;a++){var c=n[a];0!==i[c]&&(o=!1)}o&&(r.splice(t--,1),e=s(s.s=n[0]))}return e}var o={},i={app:0},r=[];function s(t){if(o[t])return o[t].exports;var n=o[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.m=e,s.c=o,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)s.d(n,o,function(t){return e[t]}.bind(null,o));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var l=c;r.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var o=n("85ec"),i=n.n(o);i.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var o=n("2b0e"),i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("navbar"),n("router-view")],1)},r=[],s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("a",[n("router-link",{attrs:{to:"/"}},[e._v("Accueil")])],1),n("a",[n("router-link",{attrs:{to:"/login"}},[e._v("Se connecter")])],1)])},a=[],c={},u=c,l=n("2877"),d=Object(l["a"])(u,s,a,!1,null,null,null),h=d.exports,f={components:{Navbar:h}},p=f,m=(n("034f"),Object(l["a"])(p,i,r,!1,null,null,null)),v=m.exports,g=n("8c4f"),y=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",{staticClass:"container"},[e.biotestChosen&&e.resultDescription.biotest?n("Legend",{attrs:{name:"title",title:"BBAC"==e.biotestChosen||"NQE"==e.biotestChosen?e.chemistryElementChosen:e.biotestChosen}}):e._e(),"toxicité"==e.biotestChosen?n("Legend",{attrs:{name:"toxicity-result-legend",data:e.resultDescription.campaign}}):e._e(),e.resultDescription.biotest?n("Legend",{attrs:{name:"biotest-result-legend",data:"toxicité"==e.biotestChosen?"":e.resultDescription.campaign,biotest:e.biotestChosen,NQEValidationPrecision:e.NqeT0NotValidatedColorShown,title:"Seuil gradué"}}):e._e(),"toxicité"==e.resultDescription.biotest?n("Legend",{attrs:{name:"reproduction-conformity",biotest:"mue",title:"Seuil"}}):e._e(),e.changedColorFeature.length?n("Legend",{attrs:{name:"layer-legend",title:"Région Hydrographique",data:e.changedColorFeature}}):e._e(),n("div",{staticClass:"map",attrs:{id:"map"}}),e.result?e._e():n("div",{staticClass:"downloading-message"},[e._v(" Chargement des données "),n("span",[e._v(e._s(e.downloadingPoints))])]),e.result?n("div",{staticClass:"selection-menu"},[n("div",{staticClass:"selection-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.campaignChoice,expression:"campaignChoice"}],staticClass:"input is-small",attrs:{type:"text",placeholder:"Nom de campagne"},domProps:{value:e.campaignChoice},on:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.chooseOne(t)},input:function(t){t.target.composing||(e.campaignChoice=t.target.value)}}}),n("button",{staticClass:"button is-small is-primary",on:{click:e.chooseOne}},[n("i",{staticClass:"mdi mdi-check"})])]),e._l(e.campaignChosenList,(function(t){return n("div",{key:t.id,staticClass:"selection-item"},[n("span",[e._v(e._s(t))]),n("a",{on:{click:function(n){return e.deleteCampaign(t)}}},[n("i",{staticClass:"mdi mdi-close"})])])})),e.currentPoints.length>1?n("div",{staticClass:"selection-item"},[n("span",[e._v("Taille des points")]),n("input",{directives:[{name:"model",rawName:"v-model",value:e.markerDimension,expression:"markerDimension"}],attrs:{type:"range",min:"10",max:"50",step:"0"},domProps:{value:e.markerDimension},on:{change:e.showResult,__r:function(t){e.markerDimension=t.target.value}}})]):e._e(),e.currentPoints.length>1?n("div",{staticClass:"selection-item"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.showNumber,expression:"showNumber"}],staticClass:"sub-sector-radio",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.showNumber)?e._i(e.showNumber,null)>-1:e.showNumber},on:{change:[function(t){var n=e.showNumber,o=t.target,i=!!o.checked;if(Array.isArray(n)){var r=null,s=e._i(n,r);o.checked?s<0&&(e.showNumber=n.concat([r])):s>-1&&(e.showNumber=n.slice(0,s).concat(n.slice(s+1)))}else e.showNumber=i},e.showResult]}}),n("span",[e._v("Afficher les numéros")])]):e._e(),e.measurepointChoiceMade?n("div",{staticClass:"selection-item"},[n("button",{staticClass:"button",on:{click:e.getMeasurepointChoice}},[e._v("Modifier la personalisation")])]):e._e(),n("div",{staticClass:"dropdown selection-item",class:{"is-active":e.mapDropdownActive},on:{click:function(t){e.mapDropdownActive=!e.mapDropdownActive,e.ChemistryDropdownActive=!1,e.versionDropdownActive=!1,e.NQEDropdownActive=!1,e.biotestDropdownActive=!1}}},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[n("span",[e._v(" Fond de carte "),e.mapChosen?n("span",[e._v(": "+e._s(e.mapChosen))]):e._e()]),e._m(0)])]),n("div",{staticClass:"dropdown-menu"},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",on:{click:function(t){e.changeBackground("streets-v11"),e.mapChosen="Streets"}}},[e._v("Streets")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.changeBackground("light-v10"),e.mapChosen="Light"}}},[e._v("Light")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.changeBackground("dark-v10"),e.mapChosen="Dark"}}},[e._v("Dark")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.changeBackground("outdoors-v11"),e.mapChosen="Outdoors"}}},[e._v("Outdoors")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.changeBackground("satellite-v9"),e.mapChosen="Satellite"}}},[e._v("Satellite")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.changeBackground("satellite-streets-v11"),e.mapChosen="Satellite-Streets"}}},[e._v("Satellite-Streets")])])])]),n("div",{staticClass:"dropdown selection-item",class:{"is-active":e.versionDropdownActive},on:{click:function(t){e.versionDropdownActive=!e.versionDropdownActive,e.ChemistryDropdownActive=!1,e.NQEDropdownActive=!1,e.mapDropdownActive=!1,e.biotestDropdownActive=!1}}},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[n("span",[e._v("Version : "+e._s(e.versionChosen))]),e._m(1)])]),n("div",{staticClass:"dropdown-menu"},e._l(e.version,(function(t){return n("div",{key:t.id,staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",on:{click:function(n){return e.changeVersion(t.id)}}},[e._v(e._s(t.id))])])})),0)]),n("div",{staticClass:"dropdown selection-item",class:{"is-active":e.biotestDropdownActive},on:{click:function(t){e.biotestDropdownActive=!e.biotestDropdownActive,e.ChemistryDropdownActive=!1,e.versionDropdownActive=!1,e.mapDropdownActive=!1,e.NQEDropdownActive=!1}}},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[n("span",[e._v(" Biotest "),e.biotestChosen?n("span",[e._v(": "+e._s(e.biotestChosen))]):e._e()]),e._m(2)])]),n("div",{staticClass:"dropdown-menu"},[n("div",{staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",on:{click:function(t){e.biotestChosen="alimentation",e.showResult()}}},[e._v("Alimentation")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.biotestChosen="neurotoxicité AChE",e.showResult()}}},[e._v("Neurotoxicité AChE")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.biotestChosen="reproduction",e.showResult()}}},[e._v("Reproduction")]),e.singleResultShown?n("a",{staticClass:"dropdown-item",on:{click:function(t){e.biotestChosen="toxicité",e.showResult()}}},[e._v("Toxicité")]):e._e(),n("hr"),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.biotestChosen="NQE"}}},[e._v("NQE")]),n("a",{staticClass:"dropdown-item",on:{click:function(t){e.biotestChosen="BBAC"}}},[e._v("BBAC")])])])]),"NQE"==e.biotestChosen?n("div",{staticClass:"dropdown selection-item",class:{"is-active":e.NQEDropdownActive},on:{click:function(t){e.NQEDropdownActive=!e.NQEDropdownActive,e.ChemistryDropdownActive=!1,e.versionDropdownActive=!1,e.mapDropdownActive=!1,e.biotestDropdownActive=!1}}},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[n("span",[e._v("Element NQE : "+e._s(e.sandreChosen))]),e._m(3)])]),n("div",{staticClass:"dropdown-menu"},e._l(e.NQESandreList,(function(t){return n("div",{key:t.id,staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",on:{click:function(n){e.sandreChosen=t.sandre,e.chemistryElementChosen=t.name,e.showResult()}}},[e._v(e._s(t.sandre)+" : "+e._s(t.name))])])})),0)]):e._e(),"BBAC"==e.biotestChosen?n("div",{staticClass:"dropdown selection-item",class:{"is-active":e.ChemistryDropdownActive},on:{click:function(t){e.ChemistryDropdownActive=!e.ChemistryDropdownActive,e.NQEDropdownActive=!1,e.versionDropdownActive=!1,e.mapDropdownActive=!1,e.biotestDropdownActive=!1}}},[n("div",{staticClass:"dropdown-trigger"},[n("button",{staticClass:"button",attrs:{"aria-haspopup":"true","aria-controls":"dropdown-menu"}},[n("span",[e._v("Element BBAC : "+e._s(e.sandreChosen))]),e._m(4)])]),n("div",{staticClass:"dropdown-menu dropdown-chemistry"},e._l(e.threshold.chemistry,(function(t){return n("div",{key:t.id,staticClass:"dropdown-content"},[n("a",{staticClass:"dropdown-item",on:{click:function(n){e.sandreChosen=t.sandre,e.chemistryElementChosen=t.parameter,e.showResult()}}},[e._v(e._s(t.sandre)+" : "+e._s(t.parameter))])])})),0)]):e._e(),n("div",{staticClass:"selection-item"},["NQE"==e.biotestChosen?n("div",{staticClass:"selection-item selection-details"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.NqeT0Checked,expression:"NqeT0Checked"}],staticClass:"sub-sector-radio",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.NqeT0Checked)?e._i(e.NqeT0Checked,null)>-1:e.NqeT0Checked},on:{click:function(t){e.NqeT0NotValidatedColorShown=!e.NqeT0NotValidatedColorShown,e.showResult()},change:function(t){var n=e.NqeT0Checked,o=t.target,i=!!o.checked;if(Array.isArray(n)){var r=null,s=e._i(n,r);o.checked?s<0&&(e.NqeT0Checked=n.concat([r])):s>-1&&(e.NqeT0Checked=n.slice(0,s).concat(n.slice(s+1)))}else e.NqeT0Checked=i}}}),n("span",[e._v("Prendre en compte la validité des témoins")])]):e._e()]),n("hr",{staticClass:"selection-item"}),e.hydroSectorAdded?e._e():n("button",{staticClass:"button selection-item",on:{click:e.addHydroSectorLayer}},[e._v("Ajouter les bassins versants")]),e.hydroSectorAdded?n("div",{staticClass:"selection-item selection-details"},[n("a",{on:{click:e.removeHydroSector}},[n("i",{staticClass:"mdi mdi-close"})]),n("span",[e._v("Retirer les bassins versants")])]):e._e(),e.hydroSectorAdded?n("div",{staticClass:"selection-item selection-details"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.subSectorShown,expression:"subSectorShown"}],staticClass:"sub-sector-radio",attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.subSectorShown)?e._i(e.subSectorShown,null)>-1:e.subSectorShown},on:{change:function(t){var n=e.subSectorShown,o=t.target,i=!!o.checked;if(Array.isArray(n)){var r=null,s=e._i(n,r);o.checked?s<0&&(e.subSectorShown=n.concat([r])):s>-1&&(e.subSectorShown=n.slice(0,s).concat(n.slice(s+1)))}else e.subSectorShown=i}}}),n("span",[e._v("Afficher jusqu'aux sous-bassins")])]):e._e(),e.streamAdded?e._e():n("button",{staticClass:"button selection-item",on:{click:e.addStreamLayer}},[e._v("Ajouter les cours d'eau")]),e.streamAdded?n("div",{staticClass:"selection-item selection-details"},[n("a",{on:{click:e.removeStream}},[n("i",{staticClass:"mdi mdi-close"})]),n("span",[e._v("Retirer les cours d'eau")])]):e._e(),n("hr",{staticClass:"selection-item"}),n("div",{directives:[{name:"show",rawName:"v-show",value:e.LbRegionHyChosen,expression:"LbRegionHyChosen"}],staticClass:"selection-item console"},[n("strong",{staticClass:"selection-item"},[e._v(e._s(e.subSectorShown?e.LbSecteurHChosen:e.LbRegionHyChosen))]),n("div",{staticClass:"selection-item"},[n("span",[e._v("Couleur de la région :")]),n("a",{on:{click:e.changeLayerColor}},[n("v-swatches",{staticClass:"selection-item",attrs:{swatches:"text-advanced"},model:{value:e.colorChosen,callback:function(t){e.colorChosen=t},expression:"colorChosen"}})],1)]),e.sliderShown?n("div",{staticClass:"selection-item"},[e._v("Opacité: "+e._s(e.sliderValue)+"%")]):e._e(),e.sliderShown?n("input",{directives:[{name:"model",rawName:"v-model",value:e.sliderValue,expression:"sliderValue"}],attrs:{type:"range",min:"0",max:"100",step:"0"},domProps:{value:e.sliderValue},on:{__r:function(t){e.sliderValue=t.target.value}}}):e._e()]),e.pointArrowIdList.length?n("div",{staticClass:"selection-item"},[n("span",[e._v("Couleur des flèches")]),n("a",{on:{click:e.changeArrowColor}},[n("v-swatches",{staticClass:"selection-item",attrs:{swatches:"text-advanced"},model:{value:e.arrowColorChosen,callback:function(t){e.arrowColorChosen=t},expression:"arrowColorChosen"}})],1)]):e._e(),e.measurepointChoiceFormShown?n("div",{staticClass:"measurepoint-choice-form"},[n("table",{staticClass:"table center"},[n("thead",[n("tr",[n("th",[e._v("Point")]),e._l(e.measurepointChoiceDict,(function(t){return n("th",{key:t.id},[e._v(e._s(t.reference))])}))],2)]),e._l(e.currentPoints,(function(t){return n("tfoot",{key:t.id},[t.number&&t.id?n("tr",[n("td",[e._v(" "+e._s(t.number)+" "),n("input",{directives:[{name:"model",rawName:"v-model",value:t.shown,expression:"point.shown"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.shown)?e._i(t.shown,null)>-1:t.shown},on:{change:function(n){var o=t.shown,i=n.target,r=!!i.checked;if(Array.isArray(o)){var s=null,a=e._i(o,s);i.checked?a<0&&e.$set(t,"shown",o.concat([s])):a>-1&&e.$set(t,"shown",o.slice(0,a).concat(o.slice(a+1)))}else e.$set(t,"shown",r)}}})]),e._l(e.measurepointChoiceDict,(function(o){return n("td",{key:o.id},[void 0!=t.reference.find((function(e){return-1!=e.search(o.reference)}))&&o.placeShown.find((function(e){return e.number==t.number}))&&o.placeShown.find((function(e){return e.number==t.number})).gotOneResultPerBiotest&&e.singleResultShown?n("div",[e._v(" "+e._s(o.placeShown.find((function(e){return e.number==t.number})).reference)+" "),n("input",{directives:[{name:"model",rawName:"v-model",value:o.placeShown.find((function(e){return e.number==t.number})).shown,expression:"campaign.placeShown.find(place => place.number==point.number).shown"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(o.placeShown.find((function(e){return e.number==t.number})).shown)?e._i(o.placeShown.find((function(e){return e.number==t.number})).shown,null)>-1:o.placeShown.find((function(e){return e.number==t.number})).shown},on:{change:function(n){var i=o.placeShown.find((function(e){return e.number==t.number})).shown,r=n.target,s=!!r.checked;if(Array.isArray(i)){var a=null,c=e._i(i,a);r.checked?c<0&&e.$set(o.placeShown.find((function(e){return e.number==t.number})),"shown",i.concat([a])):c>-1&&e.$set(o.placeShown.find((function(e){return e.number==t.number})),"shown",i.slice(0,c).concat(i.slice(c+1)))}else e.$set(o.placeShown.find((function(e){return e.number==t.number})),"shown",s)}}})]):e._e(),void 0!=t.reference.find((function(e){return-1!=e.search(o.reference)}))&&o.placeShown.find((function(e){return e.number==t.number}))&&0==o.placeShown.find((function(e){return e.number==t.number})).gotOneResultPerBiotest?n("div",e._l(o.placeShown.find((function(e){return e.number==t.number})).measurepointShown,(function(i){return n("div",{key:i.id},[n("span",[e._v(e._s(i.reference))]),n("input",{directives:[{name:"model",rawName:"v-model",value:i.shown,expression:"measurepoint.shown"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(i.shown)?e._i(i.shown,null)>-1:i.shown},on:{change:[function(t){var n=i.shown,o=t.target,r=!!o.checked;if(Array.isArray(n)){var s=null,a=e._i(n,s);o.checked?a<0&&e.$set(i,"shown",n.concat([s])):a>-1&&e.$set(i,"shown",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(i,"shown",r)},function(n){e.chooseMeasurepoint(n,o.reference,o.placeShown.find((function(e){return e.number==t.number})).reference,i.reference)}]}})])})),0):e._e()])}))],2):e._e()])}))],2),n("button",{staticClass:"button validate-choice-button",on:{click:e.validateMeasurepointChoice}},[e._v("OK")]),n("button",{staticClass:"button validate-choice-button",on:{click:e.showAllPoints}},[e._v(e._s(e.allPointShown?"Désélectionner":"Sélectionner")+" tous les points")]),n("button",{staticClass:"button validate-choice-button",on:{click:e.showAllResults}},[e._v(e._s(e.allResultShown?"Désélectionner":"Sélectionner")+" tous les résultats")]),e.multipleSameBiotestPerPlaceCampaignList.length?n("button",{staticClass:"button validate-choice-button",on:{click:e.switchNumberOfResult}},[e._v("Afficher "+e._s(e.singleResultShown?"deux":"qu'un")+" résultat"+e._s(e.singleResultShown?"s":"")+" par point")]):e._e()]):e._e()],2):e._e()],1)},C=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"mdi mdi-chevron-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"mdi mdi-chevron-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"mdi mdi-chevron-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"mdi mdi-chevron-down",attrs:{"aria-hidden":"true"}})])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"icon is-small"},[n("i",{staticClass:"mdi mdi-chevron-down",attrs:{"aria-hidden":"true"}})])}],w=(n("99af"),n("4de4"),n("7db0"),n("c740"),n("4160"),n("d81d"),n("fb6a"),n("a434"),n("b0c0"),n("ac1f"),n("841c"),n("159b"),n("2909")),b=(n("96cf"),n("1da1")),_=n("bc3a"),S=n.n(_),k=n("e192"),x=n.n(k),D=n("7f75"),A=n.n(D),R=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{ref:"legend",staticClass:"legend",attrs:{draggable:""},on:{dragstart:function(t){return e.getDragStartingPosition(t)},dragend:function(t){return e.getDragEndingPosition(t)}}},[e.title?n("strong",[e._v(e._s(e.title))]):e._e(),e.biotest&&e.data&&e.data.length>1?n("div",e._l(e.data,(function(t,o){return n("div",{key:o,staticClass:"legend-container"},[n("div",{staticClass:"legend-color"},[e._v(e._s(o+1))]),t.modifying?e._e():n("span",{staticClass:"legend-content",on:{click:function(e){t.modifying=!t.modifying}}},[e._v(e._s(t.name))]),t.modifying?n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"element.name"}],domProps:{value:t.name},on:{keydown:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.modifying=!1},input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}}):e._e()])})),0):e._e(),e.biotest&&"mue"!=e.biotest&&"NQE"!=e.biotest?n("div",[e._m(0),e._m(1),e._m(2),e._m(3),e._m(4),e._m(5),"BBAC"==e.biotest||"alimentation"==e.biotest||"toxicité"==e.biotest?n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#808080"}}),n("span",{staticClass:"legend-content"},[e._v("Résultat non-interprétable")])]):e._e()]):e._e(),"mue"==e.biotest&&void 0==e.data?n("div",[e._m(6),e._m(7),e._m(8)]):e._e(),"NQE"==e.biotest?n("div",[e._m(9),e._m(10),e._m(11),e.NQEValidationPrecision?n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#ffffff",border:"2px solid red"}}),n("span",{staticClass:"legend-content"},[e._v("Témoin non-valide")])]):e._e()]):e._e(),"layer-legend"==e.name?n("div",e._l(e.data,(function(t){return n("div",{key:t.id,staticClass:"legend-container"},[n("div",{staticClass:"legend-color",style:e.getColor(t)}),n("span",{staticClass:"legend-content"},[e._v(e._s(t.sector))])])})),0):e._e(),"toxicity-result-legend"==e.name?n("div",[n("div",{staticClass:"legend-head"}),n("table",[e._m(12),e._l(e.data,(function(t,o){return n("tbody",{key:o},[n("tr",[n("td",[t.modifying?e._e():n("span",{staticClass:"legend-content",on:{click:function(e){t.modifying=!t.modifying}}},[e._v(e._s(t.name))]),t.modifying?n("input",{directives:[{name:"model",rawName:"v-model",value:t.name,expression:"element.name"}],domProps:{value:t.name},on:{keydown:function(n){if(!n.type.indexOf("key")&&e._k(n.keyCode,"enter",13,n.key,"Enter"))return null;t.modifying=!1},input:function(n){n.target.composing||e.$set(t,"name",n.target.value)}}}):e._e()]),n("td",{staticClass:"legend-color"}),n("td",{staticClass:"legend-color"}),n("td",{staticClass:"legend-color"}),n("td",{staticClass:"legend-color"}),n("td",{staticClass:"legend-color"})])])}))],2)]):e._e()])},L=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#4169e1"}}),n("span",{staticClass:"legend-content"},[e._v("Conforme")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#9acd32"}}),n("span",{staticClass:"legend-content"},[e._v("Impact faible")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#ffd700"}}),n("span",{staticClass:"legend-content"},[e._v("Impact modéré")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#ff8c00"}}),n("span",{staticClass:"legend-content"},[e._v("Impact fort")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#dc143c"}}),n("span",{staticClass:"legend-content"},[e._v("Impact très fort")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#ffffff"}}),n("span",{staticClass:"legend-content"},[e._v("Pas de résultat disponible")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#4169e1"}}),n("span",{staticClass:"legend-content"},[e._v("Conforme")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#dc143c"}}),n("span",{staticClass:"legend-content"},[e._v("Non Conforme")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#ffffff"}}),n("span",{staticClass:"legend-content"},[e._v("Pas de résultat disponible")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#4169e1"}}),n("span",{staticClass:"legend-content"},[e._v("Pas de dépassement")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#dc143c"}}),n("span",{staticClass:"legend-content"},[e._v("Dépassement de la NQE")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"legend-container"},[n("div",{staticClass:"legend-color",staticStyle:{background:"#ffffff"}}),n("span",{staticClass:"legend-content"},[e._v("Pas de résultat disponible")])])},function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("thead",[n("tr",[n("th"),n("th",{staticClass:"toxicity-legend-header"},[e._v("Alim")]),n("th",{staticClass:"toxicity-legend-header"},[e._v("Neuro")]),n("th",{staticClass:"toxicity-legend-header"},[e._v("Fécondité")]),n("th",{staticClass:"toxicity-legend-header"},[e._v("Mue")]),n("th",{staticClass:"toxicity-legend-header"},[e._v("PE")])])])}],E=(n("466d"),{data:function(){return{x:void 0,y:void 0}},props:["title","data","campaign","name","biotest","NQEValidationPrecision"],methods:{getColor:function(e){var t=this.hexToRGBA(e.color,e.opacity);return"background:rgba(".concat(t[0],",").concat(t[1],",").concat(t[2],",").concat(t[3],");")},getDragStartingPosition:function(e){this.x=e.clientX-(e.target.style.left?parseInt(e.target.style.left.match(/\d+/)[0]):0),this.y=e.clientY-(e.target.style.top?parseInt(e.target.style.top.match(/\d+/)[0]):0)},getDragEndingPosition:function(e){e.target.style.top="".concat(e.clientY-this.y,"px"),e.target.style.left="".concat(e.clientX-this.x,"px")},hexToRGBA:function(e,t){var n=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return n?[parseInt(n[1],16),parseInt(n[2],16),parseInt(n[3],16),t]:null}}}),P=E,H=Object(l["a"])(P,R,L,!1,null,null,null),N=H.exports,F=(n("b3a4"),{components:{VSwatches:A.a,Legend:N},data:function(){return{downloadingPoints:"",result:null,map:null,campaignChoice:null,campaignChosenList:[],mapDropdownActive:!1,biotestDropdownActive:!1,versionDropdownActive:!1,NQEDropdownActive:!1,ChemistryDropdownActive:!1,currentPoints:[{id:0,number:0,campaignAssociated:[],reference:[]}],mapChosen:"Light",biotestChosen:null,versionChosen:null,sandreChosen:null,chemistryElementChosen:null,version:[],threshold:{toxicity:null,chemistry:null},t0ChemistryResult:{},NQESandreList:[{sandre:1115,name:"Benzo (a) pyrene"},{sandre:1118,name:"Benzo (g,h,i) Perylene"},{sandre:1117,name:"Benzo (k) Fluoranthene"},{sandre:1116,name:"Benzo (b) Fluoranthene"},{sandre:1204,name:"Indeno (1,2,3-cd) Pyrene"},{sandre:1191,name:"Fluoranthene"},{sandre:6616,name:"DEHP"},{sandre:7707,name:"Dioxines et composées de type dioxine"}],sliderValue:100,NqeT0NotValidatedColorShown:!1,NqeT0Checked:!1,hydroSectorData:null,currentLayers:[],hydroSectorAdded:!1,gidList:[],LbRegionHyHovered:null,LbRegionHyChosen:null,LbSecteurHHovered:null,LbSecteurHChosen:null,CdRegionHyHovered:null,CdRegionHyChosen:null,sectorHovered:void 0,featureChosen:null,popup:null,subSectorShown:!1,streamData:null,streamAdded:!1,colorChangedLayerIdList:[],colorChosen:"#DDDDDD",lastColorChosen:"#DDDDDD",changedColorFeature:[],lastChangedColorFeatureId:0,pointLegend:[],layerOpacityLayerSetter:setInterval((function(){}),1e4),sliderShown:!1,resultDescription:{campaign:[],splitResult:!1,biotest:void 0,sandre:void 0},measurepointChoiceDict:[],measurepointChoiceFormShown:!1,measurepointChoiceMade:!1,allPointShown:!0,allResultShown:!0,singleResultShown:!0,multipleSameBiotestPerPlaceCampaignList:[],toxicityResult:{alimentation:!1,neurology:!1,reproduction:!1},markerDimension:20,showNumber:!0,pointArrowIdList:[],arrowColorChosen:"#000000"}},mounted:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,o,i,r,s;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return n=setInterval((function(){3!=e.downloadingPoints.length?e.downloadingPoints+=".":e.downloadingPoints=""}),1e3),t.next=3,S.a.get("".concat("http://192.168.1.147:3000/api","/version"));case 3:return o=t.sent,e.version=o.data,e.versionChosen=Math.max.apply(Math,Object(w["a"])(e.version.map((function(e){return e.id})))),t.next=8,S.a.get("".concat("http://192.168.1.147:3000/api","/campaign/data?version=").concat(e.versionChosen));case 8:return i=t.sent,r=i.data,e.result=r,e.campaignList=e.result.campaign.map((function(e){return e.reference})),x.a.accessToken="pk.eyJ1IjoiamJyb25uZXIiLCJhIjoiY2s2cW5kOWQwMHBybjNtcW8yMXJuYmo3aiJ9.z8Ekf7a0RGTZ4jrbJVpq8g",e.map=new x.a.Map({container:"map",style:"mapbox://styles/mapbox/light-v10",center:[2,47],zoom:5}),t.next=16,S.a.get("".concat("http://192.168.1.147:3000/api","/threshold/toxicity?version=").concat(e.versionChosen));case 16:return s=t.sent,e.threshold.toxicity=s.data,t.next=20,S.a.get("".concat("http://192.168.1.147:3000/api","/threshold/chemistry?version=").concat(e.versionChosen));case 20:s=t.sent,e.threshold.chemistry=s.data,clearInterval(n),e.popup=new x.a.Popup({closeButton:!1});case 24:case"end":return t.stop()}}),t)})))()},methods:{changeVersion:function(e){var t=this;return Object(b["a"])(regeneratorRuntime.mark((function n(){var o,i,r,s,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return t.versionChosen=e,o=Object(w["a"])(t.campaignChosenList),o.forEach((function(e){return t.deleteCampaign(e)})),i=setInterval((function(){3!=t.downloadingPoints.length?t.downloadingPoints+=".":t.downloadingPoints=""}),1e3),n.next=6,S.a.get("".concat("http://192.168.1.147:3000/api","/campaign/data?version=").concat(t.versionChosen));case 6:return r=n.sent,s=r.data,t.result=s,t.campaignList=t.result.campaign.map((function(e){return e.reference})),n.next=12,S.a.get("".concat("http://192.168.1.147:3000/api","/threshold/toxicity?version=").concat(t.versionChosen));case 12:return a=n.sent,t.threshold.toxicity=a.data,n.next=16,S.a.get("".concat("http://192.168.1.147:3000/api","/threshold/chemistry?version=").concat(t.versionChosen));case 16:a=n.sent,t.threshold.chemistry=a.data,clearInterval(i),t.popup=new x.a.Popup({closeButton:!1});case 20:case"end":return n.stop()}}),n)})))()},chooseOne:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,o,i,r,s,a,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=!!e.result.campaign.find((function(t){return t.reference==e.campaignChoice})),!n){t.next=20;break}if(o=e.currentPoints.find((function(t){return t.campaignAssociated.find((function(t){return t==e.campaignChoice}))})),o){t.next=20;break}return e.campaignChosenList.push(e.campaignChoice),t.next=7,S.a.get("".concat("http://192.168.1.147:3000/api","/campaign/chemistry?campaign=").concat(e.campaignChoice));case 7:i=t.sent,r=[],s=e.result.campaign.find((function(t){return t.reference==e.campaignChoice})),e.resultDescription.campaign.push({name:s.name,modifying:!1}),s.place.forEach((function(e){e.measurepoint.forEach((function(e){void 0==r.find((function(t){return t==e.code_t0_id}))&&r.push(e.code_t0_id)}))})),r.forEach(function(){var t=Object(b["a"])(regeneratorRuntime.mark((function t(n){var o,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.t0ChemistryResult[n]){t.next=6;break}return t.next=3,S.a.get("".concat("http://192.168.1.147:3000/api","/measurepoint/chemistry?id=").concat(n));case 3:o=t.sent,i=o.data,e.t0ChemistryResult[n]=i;case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()),i.data&&s.place.forEach((function(e){e.measurepoint.forEach((function(e){e.pack.forEach((function(t){i.data[t.id]&&(e.chemistry=i.data[t.id])}))}))})),a=!1,1==e.result.campaign.find((function(t){return t.reference==e.campaignChoice})).place.length&&(a=!0),c=e.result.campaign.find((function(t){return t.reference==e.campaignChoice})).project_id,e.result.campaign.find((function(t){return t.reference==e.campaignChoice})).place.forEach((function(t){var n,o,i,r,s,u;t.measurepoint.forEach((function(l){l.longitude&&l.latitude&&(i=l.longitude,r=l.latitude),a?(n=l.reference.charAt(l.reference.length-2),o=l.reference.charAt(l.reference.length-1)):(n=t.reference.charAt(t.reference.length-2),o=t.reference.charAt(t.reference.length-1)),u=parseInt(n)?n+o:o,s=e.currentPoints.find((function(e){return 0!=e.id&&e.reference[0].charAt(0)==t.reference.charAt(0)&&e.reference[0].charAt(1)==t.reference.charAt(1)&&e.reference[0].charAt(2)==t.reference.charAt(2)&&e.number==u})),a&&(s?void 0==s.campaignAssociated.find((function(t){return t==e.campaignChoice}))&&(s.campaignAssociated.push(e.campaignChoice),s.reference.push(l.reference)):e.addPoint(u,i,r,c,!0,l.reference))})),a||(s?void 0==s.campaignAssociated.find((function(t){return t==e.campaignChoice}))&&(s.campaignAssociated.push(e.campaignChoice),s.reference.push(t.reference)):e.addPoint(u,i,r,c,!1,t.reference))})),e.showResult(),e.campaignChoice="";case 20:case"end":return t.stop()}}),t)})))()},deleteCampaign:function(e){var t=this,n=[];this.currentPoints.forEach((function(o,i){if(0==i)return{};o.campaignAssociated.find((function(t){return t==e}))&&(o.campaignAssociated.splice(o.campaignAssociated.findIndex((function(t){return t==e})),1),o.reference.splice(o.reference.findIndex((function(t){return-1!=t.search(e)})),1)),0==o.reference.length&&(o.marker.remove(),n.unshift(i),t.pointArrowIdList.find((function(e){return e=="point-arrow-".concat(o.id)}))&&(t.map.removeLayer("point-arrow-".concat(o.id)),t.map.removeSource("point-arrow-".concat(o.id)),t.pointArrowIdList.splice(t.pointArrowIdList.findIndex((function(e){return"point-arrow-".concat(e.id)})),1)))})),n.forEach((function(e){t.currentPoints.splice(e,1)})),this.resultDescription.campaign.splice(this.campaignChosenList.findIndex((function(t){return t==e})),1),this.campaignChosenList.splice(this.campaignChosenList.findIndex((function(t){return t==e})),1),this.measurepointChoiceDict.splice(this.measurepointChoiceDict.findIndex((function(t){return t.reference==e})),1),this.multipleSameBiotestPerPlaceCampaignList.splice(this.multipleSameBiotestPerPlaceCampaignList.findIndex((function(t){return t==e})),1),0==this.multipleSameBiotestPerPlaceCampaignList.length&&(this.singleResultShown=!0),this.showResult()},chooseMeasurepoint:function(e,t,n,o){e.srcElement.checked&&this.measurepointChoiceDict.find((function(e){return e.reference==t})).placeShown.find((function(e){return e.reference==n})).measurepointShown.forEach((function(e){e.reference!=o&&(e.shown=!1)}))},addPoint:function(e,t,n,o,i,r){var s=this,a=document.documentElement;a.style.setProperty("--marker-dimension",this.markerDimension+"px"),a.style.setProperty("--marker-font-size",Math.round(this.markerDimension/2)+"px"),a.style.setProperty("--marker-square-dimension",Math.round(this.markerDimension/3)+"px");var c=document.createElement("div");c.className="marker",c.id=this.currentPoints.length>=1?Math.max.apply(Math,Object(w["a"])(this.currentPoints.map((function(e){return e.id}))))+1:1;var u=this.currentPoints.length>=1?Math.max.apply(Math,Object(w["a"])(this.currentPoints.map((function(e){return e.id}))))+1:1,l=new x.a.Marker(c,{draggable:!0});l.setLngLat([t,n]).addTo(this.map),l.on("dragstart",(function(){s.pointArrowIdList.find((function(e){return e=="point-arrow-".concat(u)}))&&(s.map.removeLayer("point-arrow-".concat(u)),s.map.removeSource("point-arrow-".concat(u)),s.pointArrowIdList.slice(s.pointArrowIdList.findIndex((function(e){return e=="point-arrow-".concat(u)})),1))})),l.on("dragend",(function(){s.map.addSource("point-arrow-".concat(u),{type:"geojson",data:{type:"Feature",geometry:{type:"LineString",properties:{},coordinates:[[l.getLngLat().lng,l.getLngLat().lat],[t,n]]}}}),s.map.addLayer({id:"point-arrow-".concat(u),type:"line",source:"point-arrow-".concat(u),layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":s.arrowColorChosen,"line-width":3}}),s.pointArrowIdList.push("point-arrow-".concat(u))})),this.currentPoints.push({id:u,project:o,campaignAssociated:[this.campaignChoice],number:e,marker:l,isMeasurepoint:i,reference:[r],coordinates:[t,n],shown:!0}),c.textContent=this.showNumber?e:""},changeBackground:function(e){this.map.setStyle("mapbox://styles/mapbox/".concat(e)),this.hydroSectorAdded&&this.removeHydroSector(),this.streamAdded&&this.removeStream(),this.LbRegionHyChosen&&(this.LbRegionHyChosen=null)},cleanResult:function(){this.currentPoints.forEach((function(e){e.id&&(document.getElementById(e.id).innerHTML=e.number,document.getElementById(e.id).style.background="white",document.getElementById(e.id).style.color="black",document.getElementById(e.id).style.border="solid 1px black")}))},showAllPoints:function(){this.allPointShown?(this.currentPoints.forEach((function(e){return e.shown=!1})),this.allPointShown=!1):(this.currentPoints.forEach((function(e){return e.shown=!0})),this.allPointShown=!0)},showAllResults:function(){this.allResultShown?(this.measurepointChoiceDict.forEach((function(e){e.placeShown.forEach((function(e){e.shown=!1,e.measurepointShown.forEach((function(e){return e.shown=!1}))}))})),this.allResultShown=!1):(this.allResultShown=!0,this.measurepointChoiceDict=[],this.getMeasurepointChoice())},getMeasurepointChoice:function(){var e=this;this.measurepointChoiceFormShown=!0,this.campaignChosenList.forEach((function(t){if(!e.measurepointChoiceDict.find((function(e){return e.reference==t}))){e.measurepointChoiceDict.push({reference:t,placeShown:[]});var n=e.result.campaign.find((function(e){return e.reference==t})),o=e.measurepointChoiceDict.find((function(e){return e.reference==t})).placeShown;e.currentPoints.forEach((function(i){var r,s=i.reference.find((function(e){return-1!=e.search(n.reference)}));if(s&&(r=n.place.find((function(e){return-1!=s.search(e.reference)}))),r)if(i.isMeasurepoint){var a=!1,c=r.measurepoint[i.number-1];o.push({reference:r.reference,number:i.number,shown:!0,gotOneResultPerBiotest:a,measurepointShown:[{reference:c.reference,shown:!0}]}),c.toxicity&&c.toxicity.alimentation&&(e.toxicityResult.alimentation=!0),c.toxicity&&c.toxicity.neurotoxicity&&(e.toxicityResult.neurology=!0),c.toxicity&&c.toxicity.fecondity&&(e.toxicityResult.reproduction=!0)}else{var u,l,d,h,f=!0;r.measurepoint.forEach((function(t){t.toxicity&&t.toxicity.alimentation&&(u?f=!1:(e.toxicityResult.alimentation=!0,u=!0)),t.toxicity&&t.toxicity.neurotoxicity&&(l?f=!1:(e.toxicityResult.neurology=!0,l=!0)),t.toxicity&&t.toxicity.fecondity&&(d?f=!1:(d=!0,e.toxicityResult.reproduction=!0)),t.chemistry&&(h?f=!1:h=!0)})),o.push({reference:r.reference,number:i.number,shown:f&&e.singleResultShown||!f,gotOneResultPerBiotest:f,measurepointShown:[]}),f||void 0!=e.multipleSameBiotestPerPlaceCampaignList.find((function(e){return e==t}))||e.multipleSameBiotestPerPlaceCampaignList.push(t);var p=o.find((function(e){return e.reference==r.reference})).measurepointShown;r.measurepoint.forEach((function(t){f?p.push({reference:t.reference,shown:f&&e.singleResultShown||!f&&!e.singleResultShown}):p.push({reference:t.reference,shown:0==p.length||!e.singleResultShown})}))}}))}})),this.measurepointChoiceFormShown=!0},validateMeasurepointChoice:function(){this.measurepointChoiceFormShown=!1,this.measurepointChoiceMade=!0,this.showResult()},switchNumberOfResult:function(){this.singleResultShown=!this.singleResultShown,"toxicité"!=this.biotestChosen||this.singleResultShown||(this.biotestChosen="alimentation"),this.measurepointChoiceDict=[],this.getMeasurepointChoice()},showResult:function(){var e=this,t=document.documentElement;if(t.style.setProperty("--marker-dimension",this.markerDimension+"px"),t.style.setProperty("--marker-square-dimension",Math.round(this.markerDimension/3)+"px"),t.style.setProperty("--marker-font-size",Math.round(this.markerDimension/2)+"px"),this.biotestChosen||this.currentPoints.forEach((function(t){if(0==t.id)return{};if(t.shown){var n=document.getElementById(t.id);n.style.display="inherit",n.textContent=e.showNumber?t.number:""}else{var o=document.getElementById(t.id);o.style.display="none"}})),this.biotestChosen){this.resultDescription.biotest=this.biotestChosen,this.cleanResult();var n,o,i=Math.max.apply(Math,Object(w["a"])(this.currentPoints.map((function(e){return e.campaignAssociated.length}))));if("alimentation"==this.biotestChosen||"neurotoxicité AChE"==this.biotestChosen||"reproduction"==this.biotestChosen||"toxicité"==this.biotestChosen?(o="toxicity","alimentation"==this.biotestChosen?n="alimentation":"neurotoxicité AChE"==this.biotestChosen?n="neurotoxicity":"reproduction"==this.biotestChosen?n="fecondity":"toxicité"==this.biotestChosen&&(n="toxicity")):"NQE"!=this.biotestChosen&&"BBAC"!=this.biotestChosen||(o="chemistry",n=this.biotestChosen),!this.measurepointChoiceMade||this.measurepointChoiceDict.length!=this.campaignChosenList.length||this.measurepointChoiceDict.length&&void 0!=this.campaignChosenList.find((function(t){return void 0==e.measurepointChoiceDict.find((function(e){return e.reference==t}))})))return this.getMeasurepointChoice();var r=void 0!=this.currentPoints.find((function(e){return e.campaignAssociated.length>1}))||"toxicity"==n;this.resultDescription.splitResult=!!r,this.currentPoints.forEach((function(t){if(0==t.id)return{};if(t.shown){var s=document.getElementById(t.id);s.style.display="inherit",s.textContent=e.showNumber?t.number:"";var a="",c=!1;e.campaignChosenList.forEach((function(u,l){var d,h,f;if(t.isMeasurepoint?h=e.result.campaign.find((function(e){return e.reference==u})).place[0].measurepoint.find((function(n){return void 0!=t.reference.find((function(e){return-1!=e.search(n.reference)}))&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.measurepointShown[0].shown&&e.measurepointShown[0].reference==n.reference}))})):d=e.result.campaign.find((function(e){return e.reference==u})).place.find((function(n){return void 0!=t.reference.find((function(e){return-1!=e.search(n.reference)}))&&void 0!=e.measurepointChoiceDict.find((function(e){return e.reference==u}))})),e.singleResultShown)if(d&&"toxicity"!=n&&(h=d.measurepoint.find((function(t){return void 0!=t[o]&&("toxicity"!=o||void 0!=t[o][n])&&(e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).gotOneResultPerBiotest||e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&void 0!=e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown}))&&t.reference==e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown})).reference)}))),"toxicity"!=n){if(h&&(f="toxicity"==o?e.getStyleToxicity(h,e.biotestChosen):e.getStyleChemistry(h,e.biotestChosen,e.sandreChosen)),f&&!r){var p=f,m=p.background,v=p.color,g=p.border;s.style.background=m,s.style.color=v,g&&e.NqeT0NotValidatedColorShown&&(s.style.border="solid ".concat(g," 2px"))}r&&(f&&(c=!0),a+=0==l?'<div class="squares"><div class="square-row">':"",a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white","; ").concat(f&&f.border&&e.NqeT0NotValidatedColorShown?"border: solid red 2px":"",'"></div>'),a+=l==i-1?"</div></div>":"")}else(d||h)&&(e.toxicityResult.alimentation&&(d&&(h=d.measurepoint.find((function(t){return void 0!=t.toxicity&&t.toxicity.alimentation&&(e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).gotOneResultPerBiotest||e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&void 0!=e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown}))&&t.reference==e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown})).reference)}))),h?(a+=0==l?'<div class="squares"><div class="square-row">':"<div class='square-row'>",f=e.getStyleToxicity(h,"alimentation"),f&&(c=!0),a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white",';"></div>'),a+=e.toxicityResult.reproduction||e.toxicityResult.neurology?"":l==i-1?"</div></div>":"</div>"):(a+=0==l?'<div class="squares"><div class="square-row">':"<div class='square-row'>",a+='<div class="square" style="background:#FFFFFF"></div>',a+=e.toxicityResult.reproduction||e.toxicityResult.neurology?"":l==i-1?"</div></div>":"</div>")),e.toxicityResult.neurology&&(d&&(h=d.measurepoint.find((function(t){return void 0!=t.toxicity&&t.toxicity.neurotoxicity&&(e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).gotOneResultPerBiotest||e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&void 0!=e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown}))&&t.reference==e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown})).reference)}))),h?(a+=e.toxicityResult.alimentation?"":0==l?'<div class="squares"><div class="square-row">':"<div class='square-row'>",f=e.getStyleToxicity(h,"neurotoxicité AChE"),f&&(c=!0),a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white",';"></div>'),a+=e.toxicityResult.reproduction?"":l==i-1?"</div></div>":"</div>"):(a+=e.toxicityResult.alimentation?"":0==l?'<div class="squares"><div class="square-row">':"<div class='square-row'>",a+='<div class="square" style="background:#FFFFFF"></div>',a+=e.toxicityResult.reproduction?"":l==i-1?"</div></div>":"</div>")),e.toxicityResult.reproduction&&(d&&(h=d.measurepoint.find((function(t){return void 0!=t.toxicity&&t.toxicity.fecondity&&(e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).gotOneResultPerBiotest||e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&void 0!=e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown}))&&t.reference==e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.shown})).reference)}))),h?(a+=e.toxicityResult.alimentation||e.toxicityResult.neurology?"":0==l?'<div class="squares"><div class="square-row">':"<div class='square-row'>",f=e.getStyleToxicity(h,"reproduction"),f&&(c=!0),a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white",';"></div>'),f=e.getStyleToxicity(h,"molting_cycle_conformity"),f&&(c=!0),a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white",';"></div>'),f=e.getStyleToxicity(h,"surface_retard_conformity"),f&&(c=!0),a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white",';"></div>'),a+=l==i-1?"</div></div>":"</div>"):(a+=e.toxicityResult.alimentation||e.toxicityResult.neurology?"":0==l?'<div class="squares"><div class="square-row">':"<div class='square-row'>",a+='<div class="square" style="background:#FFFFFF"></div>',a+='<div class="square" style="background:#FFFFFF"></div>',a+='<div class="square" style="background:#FFFFFF"></div>',a+=l==i-1?"</div></div>":"</div>")));else d&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown}))&&("toxicity"!=n?d.measurepoint.forEach((function(t,n){t&&e.measurepointChoiceDict.find((function(e){return e.reference==u})).placeShown.find((function(e){return e.reference==d.reference&&e.shown})).measurepointShown.find((function(e){return e.reference==t.reference&&e.shown}))&&(f="toxicity"==o?e.getStyleToxicity(t,e.biotestChosen):e.getStyleChemistry(t,e.biotestChosen,e.sandreChosen)),f&&(c=!0),a+=0==l&&0==n?'<div class="squares"><div class="square-row">':"",a+='<div class="square" style="background:'.concat(f&&f.background?f.background:"white","; ").concat(f&&f.border&&e.NqeT0NotValidatedColorShown?"border: solid red 2px":"",'"></div>'),a+=l==i-1&&n==d.measurepoint.length?"</div></div>":""})):console.log("pas encore fait ce cas de toxicité + plusieurs résultats du même biotest par place"))})),s.innerHTML+=c?a:""}else{var u=document.getElementById(t.id);u.style.display="none"}}))}},getStyleToxicity:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.biotestChosen;if(t){var n;if("alimentation"==t&&(n="alimentation"),"neurotoxicité AChE"==t&&(n="neurotoxicity"),"reproduction"==t&&(n="fecondity"),"molting_cycle_conformity"==t&&(n="molting_cycle_conformity"),"surface_retard_conformity"==t&&(n="surface_retard_conformity"),!e.toxicity[n])return{background:"#FFFFFF",color:"white"};if("alimentation"==t&&parseFloat(e.toxicity.male_survival_7_days)<70)return parseFloat(e.toxicity.male_survival_7_days)<70?{background:"#808080",color:"white"}:{background:""};if("surface_retard_conformity"==n||"molting_cycle_conformity"==n)return"NA"==e.toxicity[n]||"Conforme"==e.toxicity[n]||"Conforme BC1"==e.toxicity[n]?{background:"#4169e1",color:"white"}:{background:"#dc143c",color:"white"};if(e.toxicity[n]>-this.threshold.toxicity.find((function(e){return e.parameter==t&&"pas d'effet"==e.meaning})).threshold)return{background:"#4169e1",color:"white"};if(e.toxicity[n]>-this.threshold.toxicity.find((function(e){return e.parameter==t&&"effet faible"==e.meaning})).threshold)return{background:"#9acd32",color:"white"};if(e.toxicity[n]>-this.threshold.toxicity.find((function(e){return e.parameter==t&&"effet modéré"==e.meaning})).threshold)return{background:"#ffd700"};if(e.toxicity[n]>-this.threshold.toxicity.find((function(e){return e.parameter==t&&"effet élevé"==e.meaning})).threshold)return{background:"#ff8c00",color:"white"};if(e.toxicity[n]<-this.threshold.toxicity.find((function(e){return e.parameter==t&&"effet élevé"==e.meaning})).threshold)return{background:"#dc143c",color:"white"}}},getStyleChemistry:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.biotestChosen,n=arguments.length>2?arguments[2]:void 0;if(t&&e){var o,i,r;if(o=this.t0ChemistryResult[e.code_t0_id],i=this.threshold.chemistry.find((function(e){return e.sandre==n})),!i)return{background:"#808080",color:"white"};if(7==e.chemistryDays?r="7j":21==e.chemistryDays&&(r="21j"),e.chemistry&&e.chemistry[n]){if("NQE"==t){if(i.NQE){var s={};return o&&o[n]&&i.concentration_t0_max&&i.concentration_t0_max<o[n]&&(s.border="red"),e.chemistry[n]<i.NQE?(s.background="#4169e1",s.color="white"):(s.background="#dc143c",s.color="white"),s}return{background:"#808080",color:"white"}}if("7j"==r||"21j"==r){if(!(o&&o[n]&&i["".concat(r,"_threshold")]&&i["".concat(r,"_threshold")]>o[n]&&e.chemistry[n]))return{background:"#808080",color:"white"};if(e.chemistry[n]<i["".concat(r,"_threshold")])return{background:"#4169e1",color:"white"};if(e.chemistry[n]<i["".concat(r,"_graduate_25")])return{background:"#9acd32",color:"white"};if(e.chemistry[n]<i["".concat(r,"_graduate_50")])return{background:"#ffd700"};if(e.chemistry[n]<i["".concat(r,"_graduate_75")])return{background:"#ff8c00",color:"white"};if(e.chemistry[n]>i["".concat(r,"_graduate_75")])return{background:"#dc143c",color:"white"}}}}},addStreamLayer:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.streamData){t.next=6;break}return t.next=3,S.a.get("".concat("http://192.168.1.147:3000/api","/layer/stream"));case 3:n=t.sent,o=n.data,e.streamData=o;case 6:e.streamAdded||(e.map.addSource("Stream",{type:"geojson",data:{type:"FeatureCollection",features:e.streamData},generateId:!0}),e.streamAdded=!0),e.map.addLayer({id:"streams",source:"Stream",type:"line",paint:{"line-color":"#1E90FF","line-width":3}});case 8:case"end":return t.stop()}}),t)})))()},addHydroSectorLayer:function(){var e=this;return Object(b["a"])(regeneratorRuntime.mark((function t(){var n,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(e.hydroSectorData){t.next=7;break}return t.next=3,S.a.get("".concat("http://192.168.1.147:3000/api","/layer/hydro-sector"));case 3:o=t.sent,n=o.data,e.hydroSectorData=n,n.forEach((function(t){e.gidList.push(t.properties.gid)}));case 7:e.hydroSectorAdded||(e.map.addSource("HydroSector",{type:"geojson",data:{type:"FeatureCollection",features:e.hydroSectorData},generateId:!0}),e.map.addLayer({id:"hydro-sector",type:"fill",source:"HydroSector",paint:{"fill-color":["case",["boolean",["feature-state","hovered"],!1],"#64bdbb","#DDDDDD"],"fill-opacity":.4,"fill-antialias":!1}})),e.hydroSectorAdded=!0,e.map.on("click","hydro-sector",(function(t){var n=e.map.queryRenderedFeatures(t.point);if(n&&n.length&&n[0].properties&&n[0].properties.LbRegionHy){e.LbRegionHyChosen=n[0].properties.LbRegionHy,e.CdRegionHyChosen=n[0].properties.CdRegionHy,e.LbSecteurHChosen=n[0].properties.LbSecteurH;var o=e.subSectorShown?e.LbSecteurHChosen:e.LbRegionHyChosen,i=e.changedColorFeature.find((function(e){return e.sector==o}));if(i?(e.colorChosen=i.color,e.lastColorChosen=i.color):(e.colorChosen="#DDDDDD",e.lastColorChosen="#DDDDDD"),e.changeLayerOpacity(),e.subSectorShown)e.featureChosen=n[0];else{e.featureChosen=e.map.queryRenderedFeatures(void 0,{layers:["hydro-sector"]}).filter((function(t){return t.properties.CdRegionHy==e.CdRegionHyChosen}));var r=[],s=[];e.featureChosen.forEach((function(e,t){s.find((function(t){return t==e.properties.gid}))&&r.push(t),s.push(e.properties.gid)})),r.reverse().forEach((function(t){return e.featureChosen.splice(t,1)}))}}else e.LbRegionHyChosen=null,e.CdRegionHyChosen=null})),e.map.on("mousemove",(function(t){var n=e.map.queryRenderedFeatures(t.point);n&&n.length&&n[0].properties&&n[0].properties.LbRegionHy?(e.popup.setLngLat(t.lngLat).setText(e.subSectorShown?n[0].properties.LbSecteurH:n[0].properties.LbRegionHy).addTo(e.map),e.LbRegionHyHovered=n[0].properties.LbRegionHy,e.CdRegionHyHovered=n[0].properties.CdRegionHy,e.LbSecteurHHovered=n[0].properties.LbSecteurH,e.sectorHovered&&(e.subSectorShown?e.map.removeFeatureState({source:"HydroSector",id:e.sectorHovered.id}):e.sectorHovered.forEach((function(t){e.map.removeFeatureState({source:"HydroSector",id:t.id})}))),e.subSectorShown?(e.sectorHovered=n[0],e.map.setFeatureState({source:"HydroSector",id:n[0].id},{hovered:!0})):(e.sectorHovered=e.map.queryRenderedFeatures(void 0,{layers:["hydro-sector"]}).filter((function(t){return t.properties.CdRegionHy==e.CdRegionHyHovered})),e.sectorHovered.forEach((function(t){e.map.setFeatureState({source:"HydroSector",id:t.id},{hovered:!0})})))):(e.sectorHovered&&e.sectorHovered.length?e.sectorHovered.forEach((function(t){e.map.removeFeatureState({source:"HydroSector",id:t.id})})):e.sectorHovered&&e.map.removeFeatureState({source:"HydroSector",id:e.sectorHovered.id}),e.sectorHovered=void 0,e.popup.remove())}));case 11:case"end":return t.stop()}}),t)})))()},removeHydroSector:function(){var e=this;this.changedColorFeature.forEach((function(t){e.map.removeLayer("hydro-sector-"+t.id),e.map.removeSource("HydroSector"+t.id)})),this.map.removeLayer("hydro-sector"),this.map.removeSource("HydroSector"),this.changedColorFeature=[],this.hydroSectorAdded=!1,this.gidList=[],this.LbRegionHyChosen=void 0,this.LbSecteurHChosen=void 0,this.CdRegionHyChosen=void 0,clearInterval(this.layerOpacityLayerSetter)},removeStream:function(){this.map.removeLayer("streams"),this.map.removeSource("Stream"),this.streamAdded=!1},changeLayerOpacity:function(){var e=this;this.sliderShown=!1;var t=this.subSectorShown?this.LbSecteurHChosen:this.LbRegionHyChosen;if(t){var n=this.changedColorFeature.find((function(e){return e.sector==t}));clearInterval(this.layerOpacityLayerSetter),n&&(this.sliderValue=100*this.map.getPaintProperty("hydro-sector-".concat(n.id),"fill-opacity"),this.sliderShown=!0,this.layerOpacityLayerSetter=setInterval((function(){e.map.setPaintProperty("hydro-sector-".concat(n.id),"fill-opacity",e.sliderValue/100),n.opacity=e.sliderValue/100}),100))}},changeArrowColor:function(){var e=this;this.lastColorChosen!=this.arrowColorChosen&&(this.pointArrowIdList.forEach((function(t){e.map.removeLayer(t),e.map.addLayer({id:t,type:"line",source:t,layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":e.arrowColorChosen,"line-width":3}})})),this.lastColorChosen,this.arrowColorChosen)},changeLayerColor:function(){if(this.lastColorChosen!=this.colorChosen){var e=this.subSectorShown?this.LbSecteurHChosen:this.LbRegionHyChosen,t=this.changedColorFeature.find((function(t){return t.sector==e}));if(t)this.map.removeLayer("hydro-sector-"+t.id),this.map.removeSource("HydroSector"+t.id),this.changedColorFeature.splice(this.changedColorFeature.findIndex((function(t){return t.sector==e})),1),this.changeLayerColor(),clearInterval(this.layerOpacityLayerSetter),this.lastColorChosen=this.colorChosen;else{var n={id:this.lastChangedColorFeatureId+1,color:this.colorChosen,opacity:.4};this.lastChangedColorFeatureId++,this.featureChosen.length?(this.map.addSource("HydroSector"+n.id,{type:"geojson",data:{type:"FeatureCollection",features:this.featureChosen}}),n.featureGid=this.featureChosen.map((function(e){return e.properties.gid})),n.sector=this.subSectorShown?this.LbSecteurHChosen:this.LbRegionHyChosen):(this.map.addSource("HydroSector"+n.id,{type:"geojson",data:this.featureChosen}),n.featureGid=this.featureChosen.properties.gid,n.sector=this.subSectorShown?this.LbSecteurHChosen:this.LbRegionHyChosen),this.map.addLayer({id:"hydro-sector-"+n.id,type:"fill",source:"HydroSector"+n.id,paint:{"fill-color":["case",["boolean",["feature-state","hovered"],!1],"#64bdbb",n.color],"fill-opacity":.4,"fill-antialias":!1}}),this.changedColorFeature.push(n),this.changeLayerOpacity()}}}}}),q=F,I=Object(l["a"])(q,y,C,!1,null,null,null),B=I.exports;o["a"].use(g["a"]);var O=new g["a"]({mode:"history",routes:[{path:"/",name:"home",component:B}]}),j=n("2f62");o["a"].use(j["a"]);var M=new j["a"].Store({});o["a"].config.productionTip=!1,new o["a"]({router:O,store:M,render:function(e){return e(v)}}).$mount("#app")},"85ec":function(e,t,n){}});
//# sourceMappingURL=app.ee4d8b9f.js.map